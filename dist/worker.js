!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";n.r(e),n.d(e,"Renderer",(function(){return g})),n.d(e,"compile",(function(){return y})),n.d(e,"get",(function(){return m})),n.d(e,"render",(function(){return w})),n.d(e,"renderFn",(function(){return b})),n.d(e,"renderFnAsync",(function(){return x})),n.d(e,"tokenize",(function(){return v}));var r=(0).constructor,i=r.isFinite,s=(r.isInteger,[].constructor.isArray);function o(t){return null!==t&&"object"==typeof t}function a(t,e){return void 0===e&&(e=0),"string"==typeof t&&t.length>=e}function u(t){return i(t)}function c(t){return s(t)}function h(t,e){return o(t)&&e in t}var l=new(function(){function t(t){this.size=t,this.reset()}return t.prototype.reset=function(){this.oldestIndex=0,this.map={},this.cachedKeys=new Array(this.size)},t.prototype.get=function(t){return this.map[t]},t.prototype.set=function(t,e){this.map[t]=e;var n=this.cachedKeys[this.oldestIndex];void 0!==n&&delete this.map[n],this.cachedKeys[this.oldestIndex]=t,this.oldestIndex++,this.oldestIndex%=this.size},t}())(1e3);function d(t){var e=t.charAt(0),n=t.substr(-1);if("'\"`".includes(e)||"'\"`".includes(n)){if(t.length<2||e!==n)throw new SyntaxError('Mismatching string quotation: "'+t+'"');return t.substring(1,t.length-1)}if(t.includes("["))throw new SyntaxError('Missing ] in varName "'+t+'"');return"+"===e?t.substr(1):t}function p(t,e,n){var r=e.trim();if(""===r)return t;if(r.startsWith(".")){if(!n)throw new SyntaxError('Unexpected . at the start of "'+e+'"');if(""===(r=r.substr(1).trim()))return t}else if(n)throw new SyntaxError('Missing . at the start of "'+e+'"');if(r.endsWith("."))throw new SyntaxError('Unexpected "." at the end of "'+e+'"');for(var i=0,s=r.split(".");i<s.length;i++){var o=s[i].trim();if(""===o)throw new SyntaxError('Empty prop name when parsing "'+e+'"');t.push(o)}return t}function f(t){if(!a(t))throw new TypeError("Cannot parse path. Expected string. Got a "+typeof t);for(var e,n,r=0,i=!1,s=new Array(0),o=0;o<t.length&&-1!==(e=t.indexOf("[",o));o=r){if(-1===(r=t.indexOf("]",e)))throw new SyntaxError('Missing ] in varName "'+t+'"');if(0===(n=t.substring(e+1,r).trim()).length)throw new SyntaxError("Unexpected token ]");r++,p(s,t.substring(o,e),i),s.push(d(n)),i=!0}return p(s,t.substring(r),i)}function m(t,e,n){if(void 0===n&&(n={}),!o(n))throw new TypeError("get expects an object option. Got "+typeof n);var r=n.depth,i=void 0===r?10:r;if(!u(i)||i<=0)throw new RangeError("Expected a positive number for depth. Got "+i);var s=Array.isArray(e)?e:f.cached(e),a=function(){return s.join(" > ")};if(s.length>i)throw new ReferenceError("The path cannot be deeper than "+i+' levels. Got "'+a()+'"');for(var c=t,l=0,d=s;l<d.length;l++){var p=d[l];if(!h(c,p)){if(n.propsExist)throw new ReferenceError(p+' is not defined in the scope at path: "'+a()+'"');return}c=c[p]}return c}f.cached=function(t){var e=l.get(t);return void 0===e&&(e=f(t),l.set(t,e)),e};var g=function(){function t(t,e){var n=this;if(void 0===e&&(e={}),this.tokens=t,this.options=e,this.render=function(t){void 0===t&&(t={});var e=n.tokens.varNames.length;n.cacheParsedPaths();for(var r=new Array(e),i=0;i<e;i++)r[i]=m(t,n.toPathCache[i],n.options);return n.stringify(r)},this.renderFn=function(t,e){void 0===e&&(e={});var r=n.resolveVarNames(t,e);return n.stringify(r)},this.renderFnAsync=function(t,e){return void 0===e&&(e={}),Promise.all(n.resolveVarNames(t,e)).then((function(t){return n.stringify(t)}))},!o(t)||!c(t.strings)||!c(t.varNames)||t.strings.length!==t.varNames.length+1)throw new TypeError("Invalid tokens object");if(!o(e))throw new TypeError("Options should be an object. Got a "+typeof e);e.validateVarNames&&this.cacheParsedPaths()}return t.prototype.cacheParsedPaths=function(){var t=this.tokens.varNames;if(void 0===this.toPathCache){this.toPathCache=new Array(t.length);for(var e=0;e<t.length;e++)this.toPathCache[e]=f.cached(t[e])}},t.prototype.resolveVarNames=function(t,e){void 0===e&&(e={});var n=this.tokens.varNames;if("function"!=typeof t)throw new TypeError("Expected a resolver function. Got "+String(t));for(var r=n.length,i=new Array(r),s=0;s<r;s++)i[s]=t.call(null,n[s],e);return i},t.prototype.stringify=function(t){for(var e=this.tokens.strings,n=this.options.explicit,r=t.length,i="",s=0;s<r;s++){i+=e[s];var o=t[s];(n||null!=o)&&(i+=o)}return i+=e[r]},t}();function v(t,e){if(void 0===e&&(e={}),!a(t))throw new TypeError("The template parameter must be a string. Got a "+typeof t);if(!o(e))throw new TypeError("Options should be an object. Got a "+typeof e);var n=e.tags,r=void 0===n?["{{","}}"]:n,i=e.maxVarNameLength,s=void 0===i?1e3:i;if(!c(r)||2!==r.length)throw TypeError("tags should be an array of two elements. Got "+String(r));var h=r[0],l=r[1];if(!a(h,1)||!a(l,1)||h===l)throw new TypeError('The open and close symbols should be two distinct non-empty strings. Got "'+h+'" and "'+l+'"');if(!u(s)||s<=0)throw new Error("Expected a positive number for maxVarNameLength. Got "+s);for(var d,p,f=h.length,m=l.length,g=0,v=[],y=[],w=0;w<t.length&&-1!==(d=t.indexOf(h,w));){var b=d+f;if(-1===(g=t.substr(b,s+m).indexOf(l)))throw new SyntaxError('Missing "'+l+'" in the template for the "'+h+'" at position '+d+" within "+s+" characters");if(g+=b,0===(p=t.substring(b,g).trim()).length)throw new SyntaxError('Unexpected "'+l+'" tag found at position '+d);if(p.includes(h))throw new SyntaxError('Variable names cannot have "'+h+'". But at position '+d+'. Got "'+p+'"');y.push(p),g+=m,v.push(t.substring(w,d)),w=g}return v.push(t.substring(g)),{strings:v,varNames:y}}function y(t,e){void 0===e&&(e={});var n=v(t,e);return new g(n,e)}function w(t,e,n){return y(t,n).render(e)}function b(t,e,n,r){return y(t,r).renderFn(e,n)}function x(t,e,n,r){return y(t,r).renderFnAsync(e,n)}},function(t,e,n){"use strict";n.r(e);class r{constructor(t,e){this.callback=t,this.options=e,this.index=0}async element(t){var e=this.callback;"function"==typeof e?e(t):await e(t),await Promise.resolve(e(t)),this.index+=1}}class i{constructor(t){this._request="string"==typeof t?new Response((new TextEncoder).encode(t)):t,this.chain=[],this.has_finished=!1}find(t,e){return this.chain.push({type:"target",selector:t,options:Object.assign({},e)}),this}setClass(t){return this.chain.push({type:"transform",function:e=>{e.setAttribute("class",t||"")}}),this}removeClass(t,e){return this.chain.push({type:"transform",function:n=>{n.setAttribute("class",element.getAttribute("class").replace(t,e.replace||""))}}),this}addClass(t,e){var n="append"==((e=e||{}).mode||"append");return this.chain.push({type:"transform",function:e=>{var r=e.getAttribute("class")||""+t;n||(r=t+e.getAttribute("class")||""),e.setAttribute("class",r)}}),this}setContent(t,e){return this.chain.push({type:"transform",function:n=>{n.setInnerContent(t,e)}}),this}removeContent(){return this.chain.push({type:"transform",function:t=>{t.setInnerContent("")}}),this}_directTransform(t,e,n){return this.chain.push({type:"transform",function:r=>{"object"==typeof e&&"function"==typeof e.execute&&(e=e.execute()),r[t](e,n)}}),this}append(t,e){return this.chain.push({type:"transform",function:n=>{n.append(t,e)}}),this}prepend(t,e){return this.chain.push({type:"transform",function:n=>{n.prepend(t,e)}}),this}before(t,e){return this._directTransform("before",t,e)}after(t,e){return this._directTransform("after",t,e)}removeElement(){return this._directTransform("remove","")}setAttribute(t,e,n){return this.chain.push({type:"transform",function:n=>{n.setAttribute(t,e)}}),this}forEach(t){return this.chain.push({type:"transform",function:t}),this}commit(){var t=this.execute();return this._request=t,this.chain=[],this.has_finished=!1,this}execute(t){t=t||{};var e=0,n=new HTMLRewriter;return this.chain.forEach(t=>{if("transform"==t.type){var i="*",s={};this.chain.slice(0,e).forEach(t=>{"target"==t.type&&(i=t.selector,s=t.options)}),n.on(i,new r(t.function,{selectorOptions:s}))}e+=1}),this.has_finished=!0,n.transform(this._request)}}class s{constructor(t){this.options=t||{src:""}}execute(){var t=i("<img/>").commit().setAttribute("src",this.src);return Object.keys(this.options).forEach(e=>{t.setAttribute(e,this.options[e])}),t.execute()}}const{render:o}=n(0);addEventListener("fetch",t=>{t.respondWith(async function(t){return new i(await fetch("https://example.com")).find("head").append('<link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">',{html:!0}).append('<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">',{html:!0}).append("<style>* {font-family: 'Inter', sans-serif;!important}</style>",{html:!0}).find("style").removeElement().find("h1").after(new s({src:"https://google.com"})).find("h1").addClass("text-4xl mb-6 font-bold text-center block mt-6 mb-12").setContent("CFW: Easy HTML").find("p").forEach(async t=>{var e=await fetch("https://randomuser.me/api/"),n=await e.json();n=n.results[0],t.setInnerContent(o('\n<div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl mb-4">\n  <div class="md:flex">\n    <div class="md:flex-shrink-0">\n      <img class="h-48 w-full object-cover md:w-48" src="{{person.picture.large}}" alt="Man looking at item at a store">\n    </div>\n    <div class="p-8">\n      <div class="uppercase tracking-wide text-sm text-indigo-500 font-semibold">Person</div>\n      <a href="#" class="block mt-1 text-lg leading-tight font-medium text-black hover:underline">{{person.login.username}}</a>\n      <p class="mt-2 text-gray-500">\n        {{person.login.sha256}}\n      </p>\n    </div>\n  </div>\n</div>\n',{person:n}),{html:!0})}).find("p:nth-of-type(1)").setContent("This lib makes using Cloudflares high speed HTMLRewriter a breeze. Easily change attributes, remove elements, or add new ones without having to write hundreds of lines. ").find("p:nth-of-type(2)").setContent("This page is actually example.com, but its been modified with 12 lines of EasyHTML code to insert and change the content!",{html:!0}).addClass("mt-4 block").after('<div id="example"><h1>hi</h1></div>',{html:!0}).commit().find("div[id=example]").addClass("bg-indigo-400").setAttribute("style","white-space: pre-line; width:unset;").setContent("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque porttitor id ipsum sed tincidunt. Duis iaculis volutpat blandit. Proin dignissim est vitae ipsum iaculis, a tincidunt purus dignissim. Pellentesque consectetur libero imperdiet sem dictum venenatis quis ut arcu. Fusce ultricies dui ante, eget bibendum lorem vulputate non. Nunc posuere augue lacus, vel ultricies sapien vulputate at. In tempus dui lacus, eget rutrum eros sagittis id. Suspendisse quis malesuada dui, eget pretium elit. Nullam quis lacinia sem. Integer feugiat malesuada cursus. Quisque id elit imperdiet, tristique nulla nec, condimentum orci. Integer cursus nulla vel nisl tincidunt varius. Curabitur quis malesuada mi. Morbi cursus, tortor non eleifend ultrices, risus sapien molestie augue, tincidunt condimentum eros lectus non tortor. Aliquam ultricies pharetra metus, sed vestibulum augue posuere in.<br/>Quisque nec auctor turpis, non molestie purus. Aliquam luctus auctor dictum. Duis nec dictum tellus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Aliquam pharetra sem augue, sit amet aliquet est tincidunt vel. Quisque scelerisque massa varius odio tempor fermentum. Proin feugiat nisi sapien, at euismod felis molestie sit amet. Proin erat risus, placerat non augue at, gravida lacinia arcu. Aliquam mollis nibh turpis, nec fringilla massa iaculis non. Aliquam eleifend, diam sit amet aliquet ultrices, urna dui tempor est, in fringilla dui purus in erat. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent eget sapien nec erat luctus tempus ut ullamcorper ex. ").execute()}(t.request))})}]);